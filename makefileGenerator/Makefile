# Makefile
#
# Last update : Thu, 15 Aug 2024, 21:52
#
# This file was auto generated by makegen, an automatic makefile generator.
#
# Repository : https://github.com/reinhardlinardi/makegen
# Maintainer : segfault1001

# Compiler

COMPILER := gcc

# Flags

COMPILE_FLAGS := -std=c11 -g -O2  -I./..
LINKING_FLAGS := -lflint -lgmp

# Source code

SRC_ROOT := ./..
SRC_DIRS := $(shell find $(SRC_ROOT) -type d)
SRC_FILES := $(shell find $(SRC_ROOT) -name '*.c' -type f)

# Build

OBJ_DIR := ./../objectFiles
EXEC_BINARY_DIR := .
OBJ_FILES := $(addprefix $(OBJ_DIR)/, $(notdir $(patsubst %.c, %.o, $(SRC_FILES))))
EXEC_BINARY_NAME := main
EXEC_BINARY := $(EXEC_BINARY_DIR)/$(EXEC_BINARY_NAME)

# Rules

.PHONY : clean
VPATH = $(SRC_DIRS)

$(EXEC_BINARY): $(OBJ_FILES) | $(EXEC_BINARY_DIR)
	@echo "[94mLinking $@ ...[0m"
	@$(COMPILER) -o $@ $^ $(LINKING_FLAGS)

$(EXEC_BINARY_DIR):
	@mkdir -p $@

$(OBJ_DIR)/%.o: %.c | $(OBJ_DIR)
	@echo "[94mCompiling $< ...[0m"
	@$(COMPILER) -o $@ -c $< $(COMPILE_FLAGS)

$(OBJ_DIR):
	@mkdir -p $@

clean:
	@echo "Cleaning up ..."
	@rm $(EXEC_BINARY) $(OBJ_DIR)/*.o